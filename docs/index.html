<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.2"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>doko2: doko_mc_ai</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">doko2
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.2 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search",'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('index.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">doko_mc_ai </div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p ><a class="anchor" id="md_README"></a> This is a monte carlo based artificial intelligence for playing the card game of 'Doppelkopf'.</p>
<h1>How to compile it</h1>
<p >Up to date, there is no platform independent build system. On a GNU/Linux system you should be able to build and start the main program with the following commands if you have a recent GCC compiler installed </p><pre class="fragment">$ cd src
$ make main.ex
$ ./main
</pre> <h1>Source overview</h1>
<p >The sources are alltogether located in the <code>src</code> directory.</p>
<ul>
<li><code>random</code> This module contains a fast xorshift pseudo random generator (prg). It is needed, as the standard library rand() prg suffers from enormeous performance issues if used in a multithreaded program.</li>
<li><code>simulate</code> This module contains functions to perform a random simulation ofa game. The input are hypothetical games with a specific card distribution generated by the mc module.</li>
<li><code>mc</code> This module contains functions to randomly distribute cards to the players.</li>
<li><code>core</code> This is the core module. It handles the creation and joining of worker threads.</li>
</ul>
<p >A typical call to these inner modules enters at the <code>GetBestCard</code> function of the <code>core</code> module. There, worker threads are started. Each thread repeatedly calls the <code>mc_sample</code> function from the <code>mc</code> module to randomly distribute the left cards to the other players. On the sampled hypothetical game, a simulation is run. The result is reported back to the <code>GetBestCard</code> function. Here, the next card, that on average achieved the best score, is selected and returned.</p>
<h1>Doxygen</h1>
<p >Most code is commented using doxygen format. You can build the doxygen documentation by calling </p><pre class="fragment">$ doxygen
</pre><p> in the root directory. New functions should always be annotated with a detailed doxygen description of what it does and how it is used in the header file. The source file on the other hand should contain detailed comments (non-doxygen) that explain, how it is done.</p>
<h1>TODO</h1>
<p >The following topics need improvements and you are welcome to contribute.</p>
<ul>
<li>The frontend/ui does not check if the game that is played is legal. It should detect obvious errors such as a card is existent more than two times or a player does not play according to the rules. At the moment such corrupt input does invalidate the results at best and crash the program at worst.</li>
<li>The frontend/ui is very very basic, does not allow correction an errorneous input and does not check for valid input.</li>
<li>A separation of the frontend from the core is in planning. Some kind of protocol (perhaps json based) would be nice. This would enable a server client model, where different uis could act as clients and get the best next moves from a core server, that performs the calculations.</li>
<li>A platform independent build system would be much appreciated. Examples of such build systems are CMake or Meson. The whole project is written in almost platform independent c11 code. There are however small portions that are GNU/Linux specific, most notable the time measurement as well as the detection of the number of cpu cores. The multithreading uses c11 threads, and requires a compiler, that supports them. </li>
</ul>
</div></div><!-- PageDoc -->
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.2 </li>
  </ul>
</div>
</body>
</html>
